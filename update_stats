#!/usr/bin/env ruby

require "bundler/inline"

gemfile do
  source "https://rubygems.org"

  gem 'activerecord', require: 'active_record'
  gem "front_matter_parser", require: true
  gem "pry", require: true
  gem 'sqlite3', require: true
end

ActiveRecord::Base.logger = Logger.new($stdout)
ActiveRecord::Base.establish_connection(
  adapter: "sqlite3",
  dbfile: "./ctf.db",
  database: "writeups" 
)

ActiveRecord::Schema.define do
  create_table :writeups do |table|
    table.text :cft, null: false
    table.text :url, null: false
    table.boolean :captured, default: false
    table.text :flag
    table.text :summary
    table.timestamps
  end
  
  create_table :cfts do |table|
    table.text :name, unique: true
    table.timestamps
  end
end

dir = Dir["./writeups/**/*.md"]
binding.pry